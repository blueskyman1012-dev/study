# 레벨 시스템 개발 완료

**작성일**: 2026-01-19
**상태**: 구현 완료
**목적**: 플레이어 레벨 시스템 및 진척도 UI 구현

---

## 구현 완료 내역

### 수정된 파일

#### 1. `app/src/utils/constants.js`
- `GAME_CONFIG` 수정:
  - `DEFAULT_HP`: 300 → 100
  - `DEFAULT_TIME`: 30 → 60
  - `DEFAULT_DAMAGE`: 34 추가

- `LEVEL_CONFIG` 추가:
```javascript
export const LEVEL_CONFIG = {
  expPerLevel: (level) => Math.round(100 * Math.pow(1.1, level - 1) / 10) * 10,
  hpPerLevel: 1,           // 1레벨당 HP +1
  damagePerLevels: 5,      // 5레벨마다 공격력 +5
  damageLevelInterval: 5,
  timePerLevels: 5,        // 10레벨마다 시간 +5초
  timeLevelInterval: 10,
  expPerCorrect: 5,        // 정답 시 경험치
  expPerMonsterKill: 20,   // 몬스터 처치 시 경험치
  expPerBossKill: 50,      // 보스 처치 시 경험치
  maxLevel: 99             // 최대 레벨
};
```

#### 2. `app/src/game/Game.js`
- 레벨 시스템 메서드 추가:
  - `getExpForLevel(level)` - 레벨별 필요 경험치 계산
  - `getLevelProgress()` - 현재 레벨 진행률 (0-1)
  - `getLevelBonusHp()` - 레벨 보너스 HP
  - `getLevelBonusDamage()` - 레벨 보너스 공격력
  - `getLevelBonusTime()` - 레벨 보너스 시간
  - `getTotalMaxHp()` - 총 최대 HP
  - `getTotalDamage()` - 총 공격력
  - `getTotalTime()` - 총 문제풀이 시간
  - `gainExp(amount)` - 경험치 획득 및 레벨업 처리

- UI 추가/수정:
  - 메인 화면 레벨 표시 영역 (클릭 가능)
  - 경험치 바 (진행률 표시)
  - 스탯 표시 (HP, 공격력, 시간)
  - `showLevelProgress()` - 레벨 진척도 상세 팝업

- 게임플레이 수정:
  - `onTimeOut()`: HP 절반 → 45 고정 데미지
  - HP 표시: % → 숫자(currentHp/maxHp)
  - 문제 텍스트 최대 6줄 표시 + 전체보기 버튼

---

## 레벨 시스템 상세

### 경험치 테이블
| 레벨 | 필요 경험치 |
|------|-------------|
| 1 | 100 |
| 2 | 110 |
| 3 | 120 |
| 4 | 130 |
| 5 | 150 |
| 10 | 240 |
| 20 | 610 |
| 50 | 10,670 |

### 레벨 보너스
| 레벨 | HP 보너스 | 공격력 보너스 | 시간 보너스 |
|------|-----------|---------------|-------------|
| 1 | +0 | +0 | +0 |
| 5 | +4 | +5 | +0 |
| 10 | +9 | +10 | +5 |
| 20 | +19 | +20 | +10 |
| 50 | +49 | +50 | +25 |

### 경험치 획득
| 행동 | 경험치 |
|------|--------|
| 정답 | +5 |
| 일반 몬스터 처치 | +20 |
| 일반 보스 처치 (10, 20, 30, 40, 60, 70, 80, 90층) | +50 |
| 중간 보스 처치 (50층) | +150 |
| 최종 보스 처치 (100층) | +350 |

---

## 레벨 진척도 UI (showLevelProgress)

클릭 시 표시되는 정보:
1. **레벨 정보**: 현재 레벨, 최대 레벨, 경험치 진행률
2. **현재 스탯**: HP, 공격력, 문제시간 (기본 + 레벨보너스 + 강화 분해)
3. **다음 보너스**: 다음 레벨업 및 마일스톤 보너스 예고
4. **경험치 획득 정보**: 정답/몬스터/보스 처치 시 획득량

---

## 기타 개선 사항

### 문제 표시 버그 수정
- 긴 문제가 칸을 삐져나오는 버그 수정
- 최대 6줄까지 22자씩 표시
- "🔍 전체보기" 버튼으로 전체 문제 확인 가능

### 시간초과 데미지
- 기존: HP 절반 감소
- 변경: 고정 45 데미지

### HP 표시
- 기존: % 표시
- 변경: currentHp/maxHp 숫자 표시

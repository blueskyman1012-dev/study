# 모바일 문제생성 안 되는 버그 수정

## 작업일: 2026-02-02

## 원인 분석

### 핵심 버그: 로딩 화면이 1프레임만 표시됨
- `showGeneratingScreen()`은 캔버스에 한 번만 그림
- 게임루프의 `render()`가 매 프레임 DungeonSelectScreen으로 덮어씀
- 사용자는 생성 중인지 알 수 없고, 다시 탭하면 중복 호출 발생
- async 함수의 에러가 조용히 삼켜져 실패해도 피드백 없음

### 부가 문제: 재진입 방지 없음
- `startDungeon`, `completeRegister` 등 async 함수가 콜백에서 await 없이 호출
- 사용자가 여러 번 탭하면 동시 다중 API 호출 발생

## 수정 내용

### `app/src/game/Game.js`

#### 1. `isGenerating` 상태 추가
- `isGenerating`, `generatingMessage`, `generatingSubMessage` 상태 필드 추가
- 생성/분석 시작 시 `true`, 완료/실패 시 `false`

#### 2. `render()`에서 로딩 화면 렌더링
- `isGenerating === true`일 때 게임 화면 대신 로딩 화면 렌더링
- 펄스 애니메이션 ⏳ 아이콘 + 메시지 표시
- 매 프레임 유지되므로 사용자에게 생성 중임을 알 수 있음

#### 3. 재진입 방지
- `startDungeon()`: 시작 시 `isGenerating` 체크, true면 즉시 return
- `completeRegister()`: 동일
- `handleInput()`: `isGenerating` 중 모든 입력 차단

#### 4. 수동 문제 생성에도 적용
- 설정 화면의 AI 문제 생성 기능에도 `isGenerating` 로딩 화면 적용

#### 5. `isGenerating` 해제 보장
- 모든 경로(성공, 실패, catch, finally)에서 `isGenerating = false` 호출
- `confirm()`/`prompt()` 호출 전에 해제하여 다이얼로그 중 화면이 정상 렌더링됨

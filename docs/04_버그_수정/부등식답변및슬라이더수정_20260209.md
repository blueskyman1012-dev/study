# 부등식 답변 런타임 변환 + 아이폰 슬라이더 수정 (2026-02-09)

## 1. 부등식 문제 - 기존 문제 런타임 변환

### 문제 상황
- 이전 수정에서 AI 프롬프트를 수정했지만, DB에 이미 저장된 기존 문제들은 답이 숫자(`4`)로 남아있음
- 부등식 문제인데 선택지가 `4, 5, 6, 3` 같은 숫자면 여러 개가 수학적으로 맞음
- 하지만 `correctIndex` 하나만 정답으로 인정 → 학생이 맞는 답을 골라도 오답 처리

### 수정 내용
- `MonsterManager._prepareChoices()`: 몬스터 선택지 준비 시점에서 감지 및 변환
  - 조건: 답이 숫자 AND (topic에 "부등식"/"inequality" 포함 OR 문제에 부등호+변수 포함)
  - 문제 텍스트에서 부등호 추출 → 답을 `x > 4` 형식으로 변환
  - 기존 숫자 선택지 제거 → `_generateInequalityWrongAnswers()`로 부등식 선택지 생성
  - 예: `4` → `x > 4`, 오답: `x < 4`, `x ≥ 4`, `x ≤ 4`

## 2. 아이폰 UI 투명도 슬라이더

### 문제 상황
- `handleTouchStart`에서 드래그 영역 감지 후 핸들러 호출하지만 `render()` 미호출
- `touchend`에서 `handleInput`이 드래그 후 건너뛰어져 화면 갱신 안됨
- 결과: 값은 바뀌지만 화면에 반영 안됨

### 수정 내용
- `InputManager.handleTouchStart()`: 드래그 영역 찾았을 때 `_needsRender = true` 추가

## 수정 파일
- `app/src/game/MonsterManager.js` - `_prepareChoices()` 부등식 런타임 변환 추가
- `app/src/game/InputManager.js` - 드래그 시작 시 `_needsRender = true` 추가

## 검증
- Vite 빌드: 성공 (38 modules, 257.07 kB)
- 단위 테스트: 6개 파일, 180개 테스트 전부 통과

# 던전 배경 미표시 버그 수정

## 날짜
2026-02-23

## 문제점
- 전투 화면(BattleScreen), 던전 선택 화면(DungeonSelectScreen), 결과 화면(ResultScreen)에서 네온 그리드 배경이 보이지 않음
- `Renderer.clear()`가 그리드를 정상적으로 그리지만, 이후 화면 요소들이 **완전 불투명**(opaque) 배경으로 그려져 그리드를 100% 가림

## 근본 원인

### 렌더링 순서
```
Renderer.clear() → 배경색 + 네온 그리드 그림
↓
renderBattleScreen() → 불투명 UI 요소들이 그리드 위를 완전히 덮음
```

### 불투명 요소 목록 (수정 전)

| 화면 | 요소 | 영역 | 색상 | 문제 |
|------|------|------|------|------|
| BattleScreen | 상단 HUD | (0,0,400,80) | `#12121a` (불투명) | 전체 너비 차단 |
| BattleScreen | 몬스터 카드 | (20,90,360,168) | `#1a1a24` (불투명) | 중앙 차단 |
| BattleScreen | 문제 카드 | (20,272,360,110) | `#1a1a24` (불투명) | 중앙 차단 |
| BattleScreen | 선택지 버튼 | 4개 | `#1a1a24` (불투명) | 중앙 차단 |
| BattleScreen | 하단 버튼바 | (0,600,400,100) | `#12121a` (불투명) | 전체 너비 차단 |
| DungeonSelect | 수학 카드 | (30,120,340,180) | `#1a1a24` (불투명) | 중앙 차단 |
| DungeonSelect | 과학 카드 | (30,330,340,180) | `#1a1a24` (불투명) | 중앙 차단 |
| DungeonSelect | 뒤로가기 | (30,560,340,55) | `#1a1a24` (불투명) | 중앙 차단 |
| ResultScreen | 메인 카드 | (25,90,350,H) | `#1a1a24` (불투명) | 중앙 차단 |

### 보스 몬스터는 이미 반투명
- `FINAL_BOSS`: `rgba(255,0,0,0.2)` ← 그리드 보임
- `MID_BOSS`: `rgba(128,0,128,0.2)` ← 그리드 보임
- `NORMAL_BOSS`: `rgba(255,69,0,0.15)` ← 그리드 보임
- 일반 몬스터만 불투명 `#1a1a24` ← **일관성 없음**

## 수정 내용

### 1. `BattleScreen.js` - 5곳 반투명 변환
- 상단 HUD: `#12121a` → `rgba(18,18,26,0.85)`
- 일반 몬스터 배경: `#1a1a24` → `rgba(26,26,36,0.8)`
- 문제 카드: `#1a1a24` → `rgba(26,26,36,0.85)`
- 선택지 버튼: `#1a1a24` → `rgba(26,26,36,0.85)`
- 하단 버튼바: `#12121a` → `rgba(18,18,26,0.85)`

### 2. `DungeonSelectScreen.js` - 3곳 반투명 변환
- 수학 던전 카드: `#1a1a24` → `rgba(26,26,36,0.85)`
- 과학 던전 카드: `#1a1a24` → `rgba(26,26,36,0.85)`
- 뒤로가기 버튼: `#1a1a24` → `rgba(26,26,36,0.85)`

### 3. `ResultScreen.js` - 1곳 반투명 변환
- 메인 결과 카드: `#1a1a24` → `rgba(26,26,36,0.85)`

## 검증
- `npm run build` 성공
- `npx vitest run` 전체 통과 (8 파일, 213 테스트)

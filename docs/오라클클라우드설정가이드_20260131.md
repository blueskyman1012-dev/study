# Oracle Cloud Free Tier 설정 가이드 (초보자용)

## 사전에 준비할 것

| 준비물 | 설명 |
|--------|------|
| **이메일 주소** | Gmail 등 인증 가능한 이메일 |
| **휴대폰** | SMS 인증용 (본인 명의) |
| **신용카드 또는 체크카드** | 본인 확인용 (과금 안 됨, 소액 승인 후 바로 취소됨) |
| **PC** | 가입 및 설정 작업용 |

> 카드는 중복 가입 방지용이며, 유료 업그레이드하지 않는 한 요금이 청구되지 않습니다.

---

## STEP 1: 회원가입

### 1-1. 가입 페이지 접속
- https://signup.cloud.oracle.com/ 접속
- "Start for free" 클릭

### 1-2. 기본 정보 입력
- Country: **Korea, Republic of** 선택
- 이름, 이메일 입력
- 이메일로 온 인증 메일 확인 후 링크 클릭

### 1-3. 비밀번호 설정
- 대문자, 소문자, 숫자, 특수문자 포함 필요

### 1-4. Home Region 선택 (중요!)
- **South Korea - Seoul** 또는 **South Korea - Chuncheon** 선택
- ⚠️ **한번 선택하면 변경 불가!** Seoul 추천 (더 안정적)

### 1-5. 전화번호 인증
- 국가 코드: +82
- 번호 입력 시 앞의 0 빼기 (010-1234-5678 → 1012345678)
- "Text me a code" 클릭 → SMS 인증번호 입력

### 1-6. 카드 정보 입력
- 신용카드 또는 해외 결제 가능한 체크카드
- 소액(약 $1) 승인 후 자동 취소됨
- 무료 티어에서는 과금 없음

### 1-7. 가입 완료
- "Start my free trial" 클릭
- 준비 완료 이메일이 올 때까지 대기 (보통 수 분 ~ 최대 며칠)

---

## STEP 2: 인스턴스(서버) 만들기

### 2-1. 콘솔 로그인
- https://cloud.oracle.com 접속 → 로그인

### 2-2. 인스턴스 생성 페이지로 이동
- 좌측 상단 햄버거 메뉴(≡) 클릭
- **Compute → Instances → Create Instance**

### 2-3. 이름 설정
- 원하는 이름 입력 (예: my-web-server)

### 2-4. 이미지(OS) 선택
- **Edit** 클릭 → **Ubuntu 22.04** 선택 (초보자에게 자료가 많음)
- Oracle Linux도 가능하지만 Ubuntu가 한글 가이드 풍부

### 2-5. Shape(사양) 선택 - 핵심!
- **Edit** 클릭
- **Ampere** 탭 선택 (ARM 프로세서)
- **VM.Standard.A1.Flex** 선택
- OCPU: **4**, Memory: **24GB** (무료 최대치)
- ⚠️ "Out of capacity" 에러가 나면 → 다른 시간대에 재시도 (새벽 추천)

> ARM이 안 되면 AMD 인스턴스(VM.Standard.E2.1.Micro)로 먼저 시작해도 됨

### 2-6. 네트워크 설정
- 기본값 그대로 사용 (VCN 자동 생성)
- **Assign a public IPv4 address**: 체크 확인

### 2-7. SSH 키 생성 (서버 접속용 열쇠)
- **Generate a key pair for me** 선택
- **Save Private Key** 클릭 → .key 파일 다운로드
- **Save Public Key** 클릭 → .pub 파일 다운로드
- ⚠️ **이 파일들을 절대 잃어버리면 안 됨!** 안전한 폴더에 보관

### 2-8. 부트 볼륨(저장 공간)
- 기본 50GB (변경 가능, 총 200GB까지 무료)

### 2-9. Create 클릭
- 인스턴스 생성 완료 (1~2분 소요)
- 상태가 **RUNNING**이 되면 성공
- **Public IP Address** 메모해두기 (예: 152.70.xxx.xxx)

---

## STEP 3: 서버에 접속하기 (SSH)

### Windows에서 접속 (MobaXterm 추천 - 초보자에게 가장 쉬움)

#### 3-1. MobaXterm 설치
- https://mobaxterm.mobatek.net/download.html
- **Home Edition (Free)** 다운로드 및 설치

#### 3-2. 접속 설정
1. MobaXterm 실행
2. **Session** → **SSH** 클릭
3. Remote host: **인스턴스의 Public IP 주소** 입력
4. Username: **ubuntu** (Ubuntu OS 선택한 경우)
5. Advanced SSH settings → **Use private key** 체크
6. STEP 2에서 다운받은 **.key 파일** 선택
7. **OK** 클릭

#### 3-3. 접속 확인
- 터미널 화면이 뜨고 `ubuntu@인스턴스이름:~$` 이 보이면 성공!

### 대안: PuTTY 사용
- PuTTY 다운로드: https://www.putty.org
- PuTTYgen으로 .key → .ppk 변환 필요
- MobaXterm이 더 편하므로 MobaXterm 추천

---

## STEP 4: 방화벽 열기 (2단계 필수!)

웹서버를 외부에서 접속하려면 **방화벽 2곳**을 모두 열어야 합니다.

### 4-1. OCI 콘솔에서 보안 규칙 추가 (1차 방화벽)

1. OCI 콘솔 → 좌측 메뉴 → **Networking → Virtual Cloud Networks**
2. VCN 클릭 → 왼쪽 **Security Lists** → **Default Security List** 클릭
3. **Add Ingress Rules** 클릭
4. 다음 규칙 2개 추가:

**HTTP (80포트):**
| 항목 | 값 |
|------|------|
| Source CIDR | 0.0.0.0/0 |
| IP Protocol | TCP |
| Destination Port Range | 80 |

**HTTPS (443포트):**
| 항목 | 값 |
|------|------|
| Source CIDR | 0.0.0.0/0 |
| IP Protocol | TCP |
| Destination Port Range | 443 |

5. **Add Ingress Rules** 클릭하여 저장

### 4-2. 인스턴스 내부 방화벽 열기 (2차 방화벽)

SSH로 접속한 후 다음 명령어 실행:

```bash
# Ubuntu의 경우
sudo iptables -I INPUT 1 -p tcp --dport 80 -j ACCEPT
sudo iptables -I INPUT 1 -p tcp --dport 443 -j ACCEPT

# 재부팅 후에도 유지되도록 저장
sudo apt install iptables-persistent -y
sudo netfilter-persistent save
```

---

## STEP 5: 웹서버(Nginx) 설치

SSH로 접속한 상태에서:

```bash
# 시스템 업데이트
sudo apt update && sudo apt upgrade -y

# Nginx 설치
sudo apt install nginx -y

# Nginx 시작 및 자동 시작 설정
sudo systemctl start nginx
sudo systemctl enable nginx

# 상태 확인
sudo systemctl status nginx
```

### 확인 방법
- 웹 브라우저에서 `http://인스턴스의Public IP` 입력
- **"Welcome to nginx!"** 페이지가 나오면 성공!

---

## STEP 6: 고정 IP 설정 (선택사항이지만 권장)

기본 IP는 인스턴스 재시작 시 변경될 수 있으므로:

1. OCI 콘솔 → **Networking → IP Management → Reserved Public IPs**
2. **Reserve Public IP Address** 클릭
3. 이름 입력 후 생성
4. 인스턴스의 VNIC에 할당

---

## STEP 7: 도메인 연결 (선택)

### 무료 도메인 사용
- **Freenom** (무료 .tk/.ml 도메인) - 가용성 불안정
- **DuckDNS** (무료 서브도메인) - 안정적, 추천

### DuckDNS 설정 방법
1. https://www.duckdns.org 접속 → GitHub/Google 로그인
2. 원하는 서브도메인 입력 (예: myservice → myservice.duckdns.org)
3. IP 주소에 인스턴스 Public IP 입력 후 저장

---

## 자주 겪는 문제와 해결법

| 문제 | 해결 방법 |
|------|-----------|
| "Out of host capacity" | ARM 인스턴스 품절. 새벽에 재시도하거나 AMD 인스턴스 사용 |
| SSH 접속 안 됨 | .key 파일 경로 확인, username이 ubuntu인지 확인 |
| 웹페이지 접속 안 됨 | 방화벽 2곳(OCI 보안목록 + iptables) 모두 열었는지 확인 |
| 가입 실패 | 카드 해외결제 활성화 확인, 오라클 고객지원 채팅 문의 |
| 인스턴스가 멈춤 | OCI 콘솔에서 Reboot 클릭 |

---

## 전체 흐름 요약

```
1. 가입 (이메일 + 카드)
     ↓
2. 인스턴스 생성 (Ubuntu + ARM)
     ↓
3. SSH 키 다운로드 → MobaXterm으로 접속
     ↓
4. 방화벽 열기 (OCI 콘솔 + iptables)
     ↓
5. Nginx 설치
     ↓
6. 브라우저에서 IP로 접속 확인
     ↓
7. (선택) 도메인 연결, HTTPS 설정
```

---

## 참고 자료 (한글)
- [오라클 클라우드 무료 웹서버 구축 - mycodings](https://mycodings.fly.dev/blog/2022-08-07-complete-introduction-of-oracle-cloud-free-tier)
- [오라클 클라우드 프리티어 사용기 - Hoing](https://hoing.io/archives/304)
- [오라클 클라우드 계정 생성 - TheKoguryo](https://thekoguryo.github.io/oci/chapter02/1/)
- [인스턴스 생성 및 SSH 접속 - 우성짱](https://www.wsgvet.com/cloud/5)
- [방화벽 설정 - pythonblog](https://pythonblog.co.kr/blog/30/)
- [80/443 포트 열기 - finterstella](https://quant.finterstella.com/entry/%EC%9B%B9%EC%84%9C%EB%B2%84%EC%9A%A9-%EB%B0%A9%ED%99%94%EB%B2%BD-%EC%84%A4%EC%A0%95-%EC%98%A4%EB%9D%BC%ED%81%B4-%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-3)

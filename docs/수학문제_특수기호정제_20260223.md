# 수학 문제 특수기호/영어 혼합 정제 수정

## 날짜
2026-02-23

## 문제점
AI가 생성한 수학 문제에 LaTeX 문법(\frac, \sqrt 등), 특수 유니코드 기호, 영어 문장이 섞여서 문제 텍스트를 읽을 수 없음.

## 수정 내용

### 1. `app/src/services/ProblemGeneratorService.js` - 프롬프트 강화
3개 프롬프트(수학, 과학, 유사문제)에 "문제 작성 규칙" 추가:
- question은 한글로 작성 (수학 변수 x, y와 수식 기호만 허용)
- LaTeX 문법 절대 금지
- 제곱은 x^2, 분수는 1/2, 루트는 √3 으로 작성
- 영어 문장/설명 금지
- 마크다운 서식 금지

### 2. `app/src/utils/textCleaner.js` - `cleanQuestionText()` 강화
AI가 지시를 무시할 경우를 대비한 후처리 정제:
- `cleanLatex()` 함수 추가: LaTeX → 읽을 수 있는 텍스트
  - `\frac{a}{b}` → `a/b`
  - `\sqrt{x}` → `√x`
  - `\times` → `×`, `\div` → `÷`
  - `\pi` → `π`, `\leq` → `≤`, `\geq` → `≥`
  - `^{n}` → `^n`, `_{n}` → `n`
  - `\left`, `\right`, `\text{}` → 내용만
  - `$` 기호, 남은 백슬래시 명령어, 중괄호 제거
- 백틱 코드블록 서식 제거 추가
- 독립 영어 문장 제거 추가

## 검증
- `npm run build` 성공
- `npx vitest run` 전체 통과 (8 파일, 209 테스트)

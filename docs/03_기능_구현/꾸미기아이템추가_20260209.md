# 꾸미기 아이템 추가

## 작업일: 2026-02-09

## 개요
상점 꾸미기 탭에 테마 직접 선택 구매, 파티클 스타일, 데미지 텍스트 스타일, 정답 이펙트 스타일 총 4종 꾸미기 아이템을 추가하여 꾸미기 탭을 풍성하게 만듦.

## 추가된 꾸미기 아이템

### A. 테마 직접 선택 구매 (6개)
- emerald, crimson, amber, violet, cyan, rose
- 가격: 각 100G
- 구매 시 즉시 적용 + purchasedThemes에 저장
- 이미 구매한 테마는 스와치 클릭으로 무료 전환
- 미구매 테마는 자물쇠 표시

### B. 파티클 스타일 (4종)
- default (기본, 무료)
- gold (황금 파티클) — 200G
- rainbow (무지개 파티클) — 300G
- sakura (핑크 벚꽃) — 300G

### C. 데미지 텍스트 스타일 (3종)
- default (기본, 무료)
- neon (네온 글로우) — 150G
- pixel (큰 픽셀 스타일) — 150G

### D. 정답 이펙트 스타일 (3종)
- default (기본 초록, 무료)
- blue (파란색 플래시) — 100G
- purple (보라색 플래시) — 100G

## 수정 파일

### 1. `app/src/utils/constants.js`
- COSMETIC_ITEMS 상수 추가 (theme, particle, damageText, correctFlash 카테고리)
- 각 아이템별 id, nameKey, price, 색상/효과 정보 정의

### 2. `app/src/game/PlayerManager.js`
- createNewPlayer()에 cosmetics 필드 추가
- loadPlayer()에 기존 유저 마이그레이션 로직 추가
- cosmetics 구조: purchasedThemes, particleStyle, purchasedParticles, damageTextStyle, purchasedDamageText, correctFlash, purchasedFlash

### 3. `app/src/game/ShopManager.js`
- buyCosmetic(category, itemId) 메서드 추가
  - 미구매: 골드 차감 + 구매 목록 추가 + 즉시 장착
  - 이미 구매: 무료 장착 전환
- equipCosmetic(category, itemId) 메서드 추가
  - 구매된 아이템 장착 전환

### 4. `app/src/game/screens/ShopScreen.js`
- 테마 스와치에 구매/장착 기능 추가 (미구매 시 자물쇠 오버레이)
- renderCosmeticSection() 함수 추가: 파티클/데미지텍스트/정답이펙트 카드 렌더링
- 각 카드: 미리보기 아이콘 + 이름 + 장착/구매 버튼

### 5. `app/src/game/EffectSystem.js`
- setCosmetics() 메서드로 플레이어 코스메틱 설정 주입
- getCorrectFlashColor() 메서드 추가
- addParticleExplosion()에 useCosmetic 파라미터 추가 (파티클 색상 변경)
- addDamageText()에 damageTextStyle 적용 (neon: 글로우, pixel: 큰 폰트)
- 플로팅 텍스트 렌더링에 glow(shadowBlur) 지원 추가

### 6. `app/src/game/BattleManager.js`
- onCorrectAnswer()의 flashScreen 호출을 getCorrectFlashColor() 사용으로 변경
- 몬스터 처치/콤보 파티클에 useCosmetic=true 전달

### 7. `app/src/canvas/Renderer.js`
- setBgTheme(themeId) 메서드 추가 (특정 테마 직접 설정)

### 8. `app/src/game/Game.js`
- init()에서 effects.setCosmetics() 호출 추가

### 9. `app/src/i18n/i18n.js`
- 4개 언어(ko, en, ja, zh) 꾸미기 관련 번역 키 추가
- cosmetic_themes, cosmetic_particle, cosmetic_damageText, cosmetic_flash
- 각 아이템 이름 + cosmetic_equipped, cosmetic_equip

## 검증
- `npm run build` 성공

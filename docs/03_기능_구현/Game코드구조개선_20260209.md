# Game.js 코드 구조 개선 결과

## 개요
Game.js가 1,188줄에서 400줄로 축소되었습니다.
6개 매니저 모듈로 책임을 분리하고, 위임(delegation) 패턴으로 기존 공개 API를 유지했습니다.

## 변경 전후 비교

| 항목 | 변경 전 | 변경 후 |
|------|---------|---------|
| Game.js | 1,188줄 | 400줄 |
| 모듈 수 | 1개 | 7개 (Game.js + 6개 매니저) |
| 테스트 | 109개 통과 | 109개 통과 (변경 없음) |
| 빌드 | 성공 | 성공 |

## 추출된 모듈

| 모듈 | 줄 수 | 책임 |
|------|-------|------|
| DialogManager.js | 217줄 | 모달, 확인, 프롬프트, 분석/생성 화면, 레벨 진척도 |
| InputManager.js | 132줄 | 클릭 영역, 터치 스크롤, 드래그 슬라이더 |
| GuideManager.js | 95줄 | 신규 유저 가이드 오버레이 |
| RegisterManager.js | 176줄 | 오답 사진 촬영 → AI 분석 → 몬스터 등록 |
| DataManager.js | 130줄 | 문제 초기화, 계정 초기화, 내보내기, 불러오기 |
| AIGenerateManager.js | 133줄 | API 키 설정, AI 테스트 생성, 메뉴 기반 문제 생성 |

## 설계 원칙

- **위임 패턴**: Game.js에 getter/setter 프록시와 위임 메서드를 두어 main.js, 스크린 파일 변경 없음
- **기존 패턴 준수**: `constructor(game)` 패턴 (BattleManager와 동일)
- **상태 소유 분리**: 각 매니저가 관련 상태를 직접 소유 (예: InputManager가 scrollY, clickAreas 소유)
- **isGenerating/generatingMessage/generatingSubMessage는 Game.js에 유지**: 여러 매니저에서 공유하므로

## 영향 범위

- `app/src/game/Game.js` - 리팩토링 완료
- `app/src/main.js` - 변경 없음
- `app/tests/unit/game/Game.test.js` - 변경 없음 (41개 테스트)
- `app/src/game/screens/*.js` - 변경 없음 (9개 스크린)

## 검증

- 매 Phase마다 `npx vitest run` → 109개 전체 통과 확인
- 최종 `npx vite build` → 빌드 성공 확인

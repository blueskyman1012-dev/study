# 상점 전체 개편 구현 완료

## 작업일: 2026-02-09

## 개요
상점 3개 탭(강화/아이템/꾸미기)의 카드 UI 개편, 구매 시각 효과 추가, 스탯 미리보기/대량 구매/테마 미리보기 등 UX 기능 추가

## 수정 파일 (5개)

### 1. `app/src/utils/constants.js`
- SHOP_ITEMS 소비 아이템 4개에 `hintKey` 속성 추가
  - reviveTicket, hintTicket, timeBoost, doubleGold

### 2. `app/src/i18n/i18n.js`
- 4개 언어(ko/en/ja/zh)에 17개 번역 키 추가
  - 스탯 관련: shopStatSummary, shopHp, shopAtk, shopTime, shopGoldBonus
  - 상점 UI: shopMaxReached, shopNotEnoughShort, shopCurrentTheme
  - 아이템 힌트: reviveTicketHint, hintTicketHint, timeBoostHint, doubleGoldHint
  - 테마 이름: theme_default, theme_emerald, theme_crimson, theme_amber, theme_violet, theme_cyan, theme_rose

### 3. `app/src/canvas/Renderer.js`
- `drawGradientCard()` - 상하 그래디언트 카드 배경 렌더링
- `getCurrentBgThemeId()` - 현재 적용된 테마 ID 반환

### 4. `app/src/game/ShopManager.js`
- **buyUpgrade()**: showModal 제거 → 파티클 + 플래시 + 플로팅 텍스트 시각 효과
- **buyItem()**: showModal 제거 → 파티클 + 플래시 + 플로팅 텍스트 시각 효과
  - randomBg: 기존 flashScreen 유지, showModal만 제거
- **buyItemBulk(itemKey, count)**: 대량 구매 메서드 추가 (price × count 차감)
- **showInsufficientGold(price)**: 골드 부족 시 흔들림 + 부족 금액 표시

### 5. `app/src/game/screens/ShopScreen.js`

#### 강화 탭 개편
- **스탯 요약 패널** (60px): HP/공격력/시간/골드+ 현재 총 수치 4컬럼
- **카드 높이** 90px → 110px 확대
- **그래디언트 카드 배경** (`#1e1e2e` → `#16161f`)
- **레벨 뱃지**: 이름 옆 "Lv.3" 또는 "✦ MAX" 표시
- **프로그레스 바** 130px → 160px + 레벨 마커 점
- **스탯 미리보기**: "HP: 145 → 160" (현재값 흰색, 화살표 회색, 다음값 초록)
- **MAX 버튼**: 초록 그래디언트
- **구매 불가 버튼 클릭**: showInsufficientGold() 호출

#### 아이템 탭 개편
- **카드 높이** 90px → 105px 확대
- **그래디언트 카드 배경**
- **사용법 힌트**: "💡 사망 시 자동 사용" 연한 골드색 11px
- **×5 대량 구매 버튼**: ×1 버튼 아래 작은 "×5 {가격}G" 버튼 (터치 40px)
- **구매 불가 버튼 클릭**: showInsufficientGold() 호출

#### 꾸미기 탭 개편
- **현재 테마 표시 패널** (50px): 테마 이름 + 컬러 스와치 원형
- **테마 미리보기**: 7개 원형 스와치 가로 배치, 활성 테마는 외곽 링 + 체크마크
- **랜덤 배경 카드**: 그래디언트 배경 적용
- **구매 불가 버튼 클릭**: showInsufficientGold() 호출

#### 공통 개선
- 탭 전환 시 미세 플래시 (`flashScreen(COLORS.ACCENT, 0.05)`)
- 구매 불가 카드도 클릭 영역 등록

## 빌드 결과
- `npm run build` 성공 (423ms, 207.53 KB)

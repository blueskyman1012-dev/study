# 배경 그리드 스크롤 고정 및 네온 샤인 강화

## 날짜
2026-02-23

## 문제점
- 스크롤 가능 화면(업적, 상점, 통계, 설정)에서 스크롤 시 배경 그리드가 사라지거나 이동
- 원인 1: `drawGrid()`가 `ctx.translate()` 이후에 호출되어 콘텐츠와 함께 스크롤됨
- 원인 2: `drawGrid()`가 현재 canvas transform 상태에 의존하여 변환이 적용된 위치에 그려짐
- 배경 그리드 선이 어두워 잘 보이지 않음

## 수정 내용

### 1. 배경 그리드 렌더링 구조 전면 개편 (`Renderer.js`)
- `clear()` 안에서 배경색 + 그리드를 함께 그리도록 통합 → 모든 화면에서 배경 항상 유지
- `drawGrid()`에 `ctx.setTransform(dpr, 0, 0, dpr, 0, 0)` 적용 → 어떤 translate/scroll 상태에서든 항상 캔버스 절대 좌표에 고정 렌더링
- DPR 값을 `Renderer.init()` 시 `_dpr` 필드에 저장

### 2. 모든 화면에서 중복 `drawGrid()` 호출 제거
- `_renderScrollableScreen()` (Game.js)
- `AchievementScreen.js`, `ShopScreen.js`, `StatsScreen.js`, `SettingsScreen.js`
- `MainScreen.js`, `ResultScreen.js`, `DungeonSelectScreen.js`, `RegisterScreen.js`
- `DialogManager.js` (분석/생성 중 화면)
- `Game.js` (로딩 화면)

### 3. 네온 샤인 효과 강화 (`Renderer.js`)
- BG_THEMES 7개 테마 모두 수정:
  - 주 그리드 불투명도: 0.5 → 0.7
  - 보조 그리드 불투명도: 0.18 → 0.25
  - 글로우 불투명도: 0.4 → 0.8
- 주 그리드 선 굵기: 1 → 1.5
- shadowBlur: 3 → 8 (네온 번짐 효과 강화)

## 검증
- `npm run build` 성공
- `npx vitest run` 전체 통과 (8 파일, 209 테스트)

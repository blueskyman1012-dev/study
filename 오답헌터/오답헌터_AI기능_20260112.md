# 오답헌터 - AI 기능 설계서

> 최신 AI 기술을 활용한 맞춤형 학습 시스템

---

## 1. AI 활용 개요

### 1-1. 도입 목적

```
현재 설계의 한계:
- 사용자가 직접 문제 유형 태깅
- 정해진 난이도만 제공
- 수동적인 복습 관리

AI 도입 후:
- 자동 문제 분석 및 분류
- 개인 맞춤형 난이도 조절
- 약점 기반 문제 추천/생성
```

### 1-2. AI 기능 목록

| 기능 | 우선순위 | 설명 |
|------|----------|------|
| OCR 텍스트 추출 | 필수 | 오답 사진에서 문제 텍스트 인식 |
| 문제 유형 분류 | 필수 | 과목/단원/유형 자동 태깅 |
| 오답 패턴 분석 | 핵심 | 틀리는 패턴 파악 및 피드백 |
| 맞춤형 문제 생성 | 핵심 | 약점 기반 유사 문제 생성 |
| 힌트/해설 생성 | 중요 | 문제별 맞춤 힌트 제공 |
| 난이도 예측 | 중요 | 문제별 예상 난이도 산정 |
| 학습 경로 추천 | 선택 | 최적 복습 순서 제안 |

---

## 2. 핵심 AI 기능 상세

### 2-1. OCR 텍스트 추출

```
[입력] 사용자가 촬영한 오답 이미지

[처리]
1. 이미지 전처리 (회전, 밝기 조정)
2. 텍스트 영역 감지
3. 문자 인식 (수식 포함)
4. 후처리 (오타 수정)

[출력]
- 문제 텍스트
- 수식 (LaTeX 형식)
- 선택지 (있는 경우)

[활용]
- 검색 가능한 오답 데이터베이스
- 문제 유형 분류의 입력 데이터
- 유사 문제 생성의 기반
```

### 2-2. 문제 유형 자동 분류

```
[입력] OCR로 추출된 문제 텍스트

[분류 체계]
수학
├── 대수 (방정식, 부등식, 함수)
├── 기하 (도형, 좌표)
├── 해석 (미분, 적분)
└── 확률/통계

영어
├── 어휘
├── 문법
├── 독해 (빈칸, 순서, 요약)
└── 듣기

[출력]
- 과목: 수학
- 대단원: 대수
- 소단원: 이차방정식
- 유형: 판별식 활용
- 신뢰도: 92%

[활용]
- 자동 태깅 (사용자 수동 입력 불필요)
- 몬스터 유형 자동 결정
- 취약 단원 통계
```

### 2-3. 오답 패턴 분석

```
[입력] 사용자의 오답 기록 (30개 이상)

[분석 항목]
1. 취약 단원 (어디서 자주 틀리나)
2. 실수 유형 (계산/개념/시간부족)
3. 시간대별 성능 (아침/저녁)
4. 난이도별 정답률

[출력 예시]
┌─────────────────────────────┐
│ 📊 오답 패턴 분석 리포트     │
├─────────────────────────────┤
│                             │
│ ⚠️ 취약 단원 TOP 3          │
│ 1. 이차함수 판별식 (정답률 23%)│
│ 2. 영어 가정법 (정답률 31%)  │
│ 3. 수열 점화식 (정답률 42%)  │
│                             │
│ 🔍 주요 실수 유형            │
│ - 부호 실수 (43%)           │
│ - 조건 누락 (28%)           │
│ - 시간 부족 (18%)           │
│                             │
│ 💡 추천                     │
│ "판별식 문제 집중 복습 필요" │
│                             │
└─────────────────────────────┘

[활용]
- 약점 기반 던전 추천
- 맞춤형 몬스터 출현 빈도 조절
- 개인화된 피드백 제공
```

### 2-4. 맞춤형 문제 생성 (LLM)

```
[입력]
- 사용자의 오답 문제
- 취약 유형 분석 결과
- 원하는 난이도

[프롬프트 예시]
"다음 조건으로 수학 문제를 생성해주세요:
 - 유형: 이차방정식 판별식
 - 난이도: 중
 - 학생 취약점: 부호 실수
 - 형식: 4지선다"

[출력]
{
  "문제": "x² + kx + 9 = 0이 서로 다른 두 실근을 가질 때, 정수 k의 개수는?",
  "선택지": ["4개", "5개", "6개", "7개"],
  "정답": "5개",
  "해설": "판별식 D = k² - 36 > 0...",
  "난이도": "중"
}

[활용]
- 던전 내 추가 문제 제공
- "보스" 문제 생성
- 복습 문제 무한 공급
```

### 2-5. 힌트/해설 생성

```
[입력] 현재 풀고 있는 문제

[출력 예시]
┌─────────────────────────────┐
│ 💡 힌트 (50G)              │
├─────────────────────────────┤
│ 단계별 힌트:                │
│                             │
│ [힌트 1] - 무료            │
│ "이 문제는 인수분해로 풀 수 │
│  있어요"                   │
│                             │
│ [힌트 2] - 30G             │
│ "x² - 5x + 6을             │
│  (x-a)(x-b) 형태로..."    │
│                             │
│ [정답 해설] - 80G          │
│ "x² - 5x + 6 = (x-2)(x-3) │
│  따라서 x = 2 또는 3"      │
│                             │
└─────────────────────────────┘

[활용]
- 골드 소모처 (게임 경제)
- 학습 효과 증대
- 막힘 해소 → 이탈 방지
```

---

## 3. AI 구현 방안

### 3-1. 기술 스택 옵션

| 기능 | 로컬 (오프라인) | 클라우드 (온라인) |
|------|----------------|------------------|
| OCR | ML Kit, Tesseract | Google Vision, AWS Textract |
| 분류 | TensorFlow Lite | OpenAI, Claude |
| 생성 | - | GPT-4, Claude |
| 분석 | 로컬 통계 | 클라우드 ML |

### 3-2. 추천 아키텍처

```
[하이브리드 방식]

┌─────────────┐     ┌─────────────┐
│   로컬      │     │   클라우드   │
├─────────────┤     ├─────────────┤
│ OCR (기본)  │ ←→  │ OCR (복잡)  │
│ 분류 (캐시) │     │ 분류 (신규) │
│ 통계 분석   │     │ 문제 생성   │
│             │     │ 힌트 생성   │
└─────────────┘     └─────────────┘

→ 인터넷 없이도 기본 기능 작동
→ 연결 시 고급 AI 기능 활성화
```

### 3-3. API 비용 최적화

```
[비용 절감 전략]

1. 캐싱
   - 동일 유형 문제는 캐시된 분류 결과 사용
   - 생성된 문제 DB화하여 재사용

2. 배치 처리
   - 실시간 대신 모아서 처리
   - 야간에 분석 작업 수행

3. 경량 모델 우선
   - 간단한 작업은 로컬 모델
   - 복잡한 작업만 클라우드

4. 사용량 제한
   - 일일 AI 생성 문제 수 제한
   - 프리미엄 유저 추가 제공
```

---

## 4. 문제점 및 개선방안

### 4-1. 기술적 문제점

| 문제점 | 상세 | 심각도 |
|--------|------|--------|
| OCR 정확도 | 손글씨, 수식 인식 어려움 | 높음 |
| 응답 지연 | API 호출 시 1~3초 대기 | 중간 |
| API 비용 | 대량 사용 시 비용 증가 | 높음 |
| 인터넷 의존 | 오프라인 시 기능 제한 | 중간 |

### 4-2. 개선방안

```
[OCR 정확도 문제]

문제:
- 손글씨 인식률 낮음 (60~70%)
- 수학 수식 인식 어려움
- 이미지 품질 편차

개선방안:
1. 이미지 가이드라인 제공
   - "밝은 곳에서 촬영하세요"
   - "글씨가 잘 보이도록 촬영하세요"

2. 전처리 강화
   - 자동 회전/크롭
   - 대비 향상
   - 노이즈 제거

3. 사용자 수정 기능
   - OCR 결과 직접 수정 가능
   - 수정 데이터로 모델 개선

4. 수식 전용 OCR 도입
   - Mathpix API 활용
   - LaTeX 변환 지원
```

```
[응답 지연 문제]

문제:
- API 호출마다 1~3초 대기
- 사용자 경험 저하

개선방안:
1. 비동기 처리
   - 등록 시 백그라운드 분석
   - 결과 나중에 반영

2. 프리로딩
   - 다음 문제 미리 준비
   - 전투 중 지연 최소화

3. 로딩 UX 개선
   - "몬스터 분석 중..." 애니메이션
   - 진행 상황 표시

4. 캐시 적극 활용
   - 유사 문제 캐시 결과 사용
   - 오프라인 대비
```

```
[API 비용 문제]

문제:
- GPT-4: $0.03/1K 토큰
- Vision API: $0.001/이미지
- 대규모 시 월 수백만원

개선방안:
1. 경량 모델 우선
   - 간단한 분류: 로컬 모델
   - 복잡한 생성만: GPT

2. 사용량 제한
   - 무료: 일 10회 AI 생성
   - 프리미엄: 무제한

3. 프롬프트 최적화
   - 토큰 수 최소화
   - 배치 요청

4. 자체 모델 학습 (장기)
   - 축적된 데이터로 파인튜닝
   - 클라우드 의존도 감소
```

```
[오프라인 대응]

문제:
- 인터넷 없으면 AI 기능 불가
- 이동 중 학습 어려움

개선방안:
1. 필수 기능 로컬화
   - OCR: ML Kit (오프라인 지원)
   - 분류: 사전 학습된 경량 모델

2. 캐시 전략
   - 자주 쓰는 힌트 미리 저장
   - 생성된 문제 로컬 저장

3. 기능 분리
   - 오프라인: 기본 전투 가능
   - 온라인: AI 고급 기능

4. 동기화
   - 온라인 복귀 시 자동 동기화
   - 분석 결과 업데이트
```

### 4-3. 품질/윤리 문제점

| 문제점 | 상세 | 개선방안 |
|--------|------|----------|
| 생성 문제 오류 | AI가 틀린 문제 생성 가능 | 검수 시스템 + 신고 기능 |
| 개인정보 | 오답 데이터 민감 정보 | 로컬 우선 + 암호화 |
| 의존성 | AI에 너무 의존 | 힌트 사용 제한 |

---

## 5. 개발 우선순위

### 5-1. Phase별 AI 기능

```
[Phase 1: MVP]
- OCR 없음 (수동 입력)
- AI 없음

[Phase 2: 기본 AI]
- OCR 텍스트 추출 (ML Kit)
- 기본 문제 분류 (룰 기반)

[Phase 3: 핵심 AI]
- 오답 패턴 분석
- 맞춤형 문제 생성 (LLM)
- 힌트 생성

[Phase 4: 고급 AI]
- 학습 경로 추천
- 실시간 난이도 조절
- 음성 인식 (선택)
```

### 5-2. 리스크 대비

| 리스크 | 대응 |
|--------|------|
| AI 서비스 장애 | 폴백 로직 (기본 기능 유지) |
| 비용 폭증 | 일일 한도 + 알림 |
| 정확도 불만 | 피드백 수집 + 개선 |

---

## 6. 기대 효과

### 6-1. 사용자 가치

```
[Before AI]
- 직접 문제 분류 (번거로움)
- 무작위 문제 (비효율)
- 막히면 포기 (이탈)

[After AI]
- 자동 분류 (편의성)
- 약점 맞춤 문제 (효율)
- AI 힌트 (학습 지속)
```

### 6-2. 차별화 강화

```
기존 차별점:
1. 개인 오답 사진 기반
2. 로그라이크 + 학습
3. 한국 고등학생 타겟
4. 다크/네온 분위기

+ AI 추가 차별점:
5. 약점 자동 분석
6. 맞춤형 문제 무한 생성
7. 스마트 힌트 시스템
```

---

## 관련 문서

- [핵심 설계](오답헌터_핵심설계_20260112.md)
- [시스템 설계](오답헌터_시스템설계_20260112.md)
- [개발 계획](오답헌터_개발계획_20260112.md)
